!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(((t=t||self).vl=t.vl||{},t.vl.widget=t.vl.widget||{},t.vl.widget.client={}))}(this,function(t){"use strict";function e(t,e,n,r){return new(n||(n=Promise))(function(o,i){function u(t){try{s(r.next(t))}catch(t){i(t)}}function a(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(u,a)}s((r=r.apply(t,e||[])).next())})}function n(t,e){var n,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(o=r[2&i[0]?"return":i[0]?"throw":"next"])&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[0,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,r=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=(o=u.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=e.call(t,u)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}var r=Object.freeze({isMounted:function(t){return!!t.parentNode},mount:function(t,e){t.parentNode!==e&&e.appendChild(t)},unmount:function(t){t.parentNode&&t.parentNode.removeChild(t)},replaceWith:function(t,e){var n=t.parentNode||null;return null!==n&&n.replaceChild(e,t),t},loadCss:function(t,e){return new Promise(function(n,r){var o=e.createElement("link");o.onload=function(){n(o)},o.onerror=function(){r(new Error('Failed import stylesheet "'+t+'"'))},o.setAttribute("rel","stylesheet"),o.setAttribute("type","text/css"),o.setAttribute("href",t),e.getElementsByTagName("head")[0].appendChild(o)})},loadScript:function(t,e){return new Promise(function(n,r){var o=e.createElement("script");o.onload=function(){n(o)},o.onerror=function(){r(new Error('Failed import script "'+t+'"'))},o.setAttribute("src",t),o.setAttribute("async",""),e.getElementsByTagName("head")[0].appendChild(o)})}});var o=Object.freeze({dispatchCustomEvent:function(t,e,n,r,o){void 0===n&&(n=null),void 0===r&&(r=!1),void 0===o&&(o=!1);var i=window.document.createEvent("CustomEvent");return i.initCustomEvent(e,r,o,n),t.dispatchEvent(i)}}),i=Object.freeze({DOM:r,Event:o}),u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};function a(t,e){function n(){this.constructor=t}u(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var s=function(t){function e(n,r){void 0===r&&(r=null);var o=t.call(this,n)||this;return Object.setPrototypeOf(o,e.prototype),o.innerError=r,o}return a(e,t),e}(Error),c=function(t){function e(n,r){void 0===r&&(r=null);var o=t.call(this,n,r)||this;return Object.setPrototypeOf(o,e.prototype),o}return a(e,t),e}(s),f=function(t){function e(n,r){void 0===r&&(r=null);var o=t.call(this,n,r)||this;return Object.setPrototypeOf(o,e.prototype),o}return a(e,t),e}(c),l=function(t){function e(n,r){void 0===r&&(r=null);var o=t.call(this,n,r)||this;return Object.setPrototypeOf(o,e.prototype),o}return a(e,t),e}(s),p=Object.freeze({InvalidArgumentError:f,LogicError:c,RuntimeError:s,UnexpectedValueError:l});var h=Object.freeze({isBrowser:function(){return"undefined"!=typeof window&&"undefined"!=typeof document},isServer:function(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)},isWebWorker:function(){return"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope}});function d(t){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var v=Object.freeze({nextTick:function(t){"undefined"!=typeof process?process.nextTick(t):setTimeout(t,0)},get:function(t,e,n){return("string"==typeof e?e.split("."):e).reduce(function(t,e){return t&&t[e]?t[e]:n},t)},set:function(t,e,n){var r="string"==typeof e?e.split("."):e,o=r.length-1;r.reduce(function(t,e,r){switch(r){case o:return t[e]=n;default:var i=t[e];return null==i&&(i=t[e]={}),i}},t)},merge:function t(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r={};return e.forEach(function(e){Object.keys(e).forEach(function(n){var o=e[n];"object"===d(r[n])&&"object"===d(o)?r[n]=t(r[n],o):r[n]=o})}),r},deepMerge:function t(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r={};return e.forEach(function(e){Object.keys(e).forEach(function(n){var o=e[n];"object"===d(r[n])&&"object"===d(o)?r[n]=t(r[n],o):"object"===d(o)?r[n]=t({},o):r[n]=o})}),r}});"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var y,b,g=function(t,e){return t(e={exports:{}},e.exports),e.exports}(function(t){t.exports=function(){var t=function(t,e,n,r,o,i){for(var u=function(t,e){var n=t.toString(16);return n.length<2&&(n="0"+n),e&&(n=n.toUpperCase()),n},a=e;a<=n;a++)o[i++]=u(t[a],r);return o},e=function(t,e,n,r,o){for(var i=e;i<=n;i+=2)r[o++]=parseInt(t.substr(i,2),16)},n="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ.-:+=^!/*?&<>()[]{}@%$#".split(""),r=[0,68,0,84,83,82,72,0,75,76,70,65,0,63,62,69,0,1,2,3,4,5,6,7,8,9,64,0,73,66,74,71,81,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,77,0,78,67,0,0,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,79,0,80,0,0],o=function(t,e){var n={ibits:8,obits:8,obigendian:!0};for(var r in e)void 0!==n[r]&&(n[r]=e[r]);for(var o,i,u,a=[],s=0,c=0,f=0,l=t.length;0===c&&(i=t.charCodeAt(s++)),o=i>>n.ibits-(c+8)&255,c=(c+8)%n.ibits,n.obigendian?0===f?u=o<<n.obits-8:u|=o<<n.obits-8-f:0===f?u=o:u|=o<<f,!(0==(f=(f+8)%n.obits)&&(a.push(u),s>=l)););return a},i=function(t,e){var n={ibits:32,ibigendian:!0};for(var r in e)void 0!==n[r]&&(n[r]=e[r]);var o="",i=4294967295;n.ibits<32&&(i=(1<<n.ibits)-1);for(var u=t.length,a=0;a<u;a++)for(var s=t[a]&i,c=0;c<n.ibits;c+=8)n.ibigendian?o+=String.fromCharCode(s>>n.ibits-8-c&255):o+=String.fromCharCode(s>>c&255);return o},u=function(t,e,n,r,o,i,u,a){return[a,u,i,o,r,n,e,t]},a=function(){return u(0,0,0,0,0,0,0,0)},s=function(t){return t.slice(0)},c=function(t){for(var e=a(),n=0;n<8;n++)e[n]=Math.floor(t%256),t/=256;return e},f=function(t){for(var e=0,n=7;n>=0;n--)e*=256,e+=t[n];return Math.floor(e)},l=function(t,e){for(var n=0,r=0;r<8;r++)n+=t[r]+e[r],t[r]=Math.floor(n%256),n=Math.floor(n/256);return n},p=function(t,e){for(var n=0;n<8;n++)t[n]&=e[n];return t},h=function(t,e){var n=a();if(e%8!=0)throw new Error("ui64_rorn: only bit rotations supported with a multiple of digit bits");for(var r=Math.floor(e/8),o=0;o<r;o++){for(var i=6;i>=0;i--)n[i+1]=n[i];for(n[0]=t[0],i=0;i<7;i++)t[i]=t[i+1];t[i]=0}return f(n)},d=function(t,e){if(e>64)throw new Error("ui64_ror: invalid number of bits to shift");var n,r=new Array(16);for(n=0;n<8;n++)r[n+8]=t[n],r[n]=0;var o=Math.floor(e/8),i=e%8;for(n=o;n<15;n++)r[n-o]=255&(r[n]>>>i|r[n+1]<<8-i);for(r[15-o]=r[15]>>>i&255,n=15-o+1;n<16;n++)r[n]=0;for(n=0;n<8;n++)t[n]=r[n+8];return r.slice(0,8)},v=function(t,e){for(var n=0;n<8;n++)t[n]^=e[n]},y=function(t,e){var n=(65535&t)+(65535&e),r=(t>>16)+(e>>16)+(n>>16);return r<<16|65535&n},b=function(t,e){return t<<e&4294967295|t>>>32-e&4294967295},g=function(t){this.mul=u(88,81,244,45,76,149,127,45),this.inc=u(20,5,123,126,247,103,129,79),this.mask=u(0,0,0,0,255,255,255,255),this.state=s(this.inc),this.next(),p(this.state,this.mask),t=c(void 0!==t?t>>>0:4294967295*Math.random()>>>0),function(t,e){for(var n=0;n<8;n++)t[n]|=e[n]}(this.state,t),this.next()};g.prototype.next=function(){var t=s(this.state);!function(t,e){var n,r,o,i=new Array(16);for(n=0;n<16;n++)i[n]=0;for(n=0;n<8;n++){for(o=0,r=0;r<8;r++)o+=t[n]*e[r]+i[n+r],i[n+r]=o%256,o/=256;for(;r<16-n;r++)o+=i[n+r],i[n+r]=o%256,o/=256}for(n=0;n<8;n++)t[n]=i[n];i.slice(8,8)}(this.state,this.mul),l(this.state,this.inc);var e=s(t);d(e,18),v(e,t),d(e,27);var n=s(t);d(n,59),p(e,this.mask);var r=f(n),o=s(e);return function(t,e){if(e>64)throw new Error("ui64_rol: invalid number of bits to shift");var n,r=new Array(16);for(n=0;n<8;n++)r[n+8]=0,r[n]=t[n];var o=Math.floor(e/8),i=e%8;for(n=7-o;n>0;n--)r[n+o]=255&(r[n]<<i|r[n-1]>>>8-i);for(r[0+o]=r[0]<<i&255,n=0+o-1;n>=0;n--)r[n]=0;for(n=0;n<8;n++)t[n]=r[n];r.slice(8,8)}(o,32-r),d(e,r),v(e,o),f(e)};var m=new g,w=function(t,e){for(var n=[],r=0;r<t;r++)n[r]=m.next()%e;return n},E=0,x=0,B=function(){if(1===arguments.length&&"string"==typeof arguments[0])this.parse.apply(this,arguments);else if(arguments.length>=1&&"number"==typeof arguments[0])this.make.apply(this,arguments);else{if(arguments.length>=1)throw new Error("UUID: constructor: invalid arguments");for(var t=0;t<16;t++)this[t]=0}};return(B.prototype="undefined"!=typeof Uint8Array?new Uint8Array(16):Buffer?new Buffer(16):new Array(16)).constructor=B,B.prototype.make=function(t){var e;if(1===t){var n=(new Date).getTime();n!==E?x=0:x++,E=n;var r,a=c(n);!function(t,e){for(var n=0,r=0;r<8;r++)n+=t[r]*e,t[r]=Math.floor(n%256),n=Math.floor(n/256)}(a,1e4),l(a,u(1,178,29,210,19,129,64,0)),x>0&&l(a,c(x)),r=h(a,8),this[3]=255&r,r=h(a,8),this[2]=255&r,r=h(a,8),this[1]=255&r,r=h(a,8),this[0]=255&r,r=h(a,8),this[5]=255&r,r=h(a,8),this[4]=255&r,r=h(a,8),this[7]=255&r,r=h(a,8),this[6]=15&r;var s=w(2,255);this[8]=s[0],this[9]=s[1];var f=w(6,255);for(f[0]|=1,f[0]|=2,e=0;e<6;e++)this[10+e]=f[e]}else if(4===t){var p=w(16,255);for(e=0;e<16;e++)this[e]=p[e]}else{if(3!==t&&5!==t)throw new Error("UUID: make: invalid version");var d="",v="object"==typeof arguments[1]&&arguments[1]instanceof B?arguments[1]:(new B).parse(arguments[1]);for(e=0;e<16;e++)d+=String.fromCharCode(v[e]);d+=arguments[2];var g=3===t?function(t){return i(function(t,e){function n(t,e,n,r,o,i){return y(b(y(y(e,t),y(r,i)),o),n)}function r(t,e,r,o,i,u,a){return n(e&r|~e&o,t,e,i,u,a)}function o(t,e,r,o,i,u,a){return n(e&o|r&~o,t,e,i,u,a)}function i(t,e,r,o,i,u,a){return n(e^r^o,t,e,i,u,a)}function u(t,e,r,o,i,u,a){return n(r^(e|~o),t,e,i,u,a)}t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;for(var a=1732584193,s=-271733879,c=-1732584194,f=271733878,l=0;l<t.length;l+=16){var p=a,h=s,d=c,v=f;a=r(a,s,c,f,t[l+0],7,-680876936),f=r(f,a,s,c,t[l+1],12,-389564586),c=r(c,f,a,s,t[l+2],17,606105819),s=r(s,c,f,a,t[l+3],22,-1044525330),a=r(a,s,c,f,t[l+4],7,-176418897),f=r(f,a,s,c,t[l+5],12,1200080426),c=r(c,f,a,s,t[l+6],17,-1473231341),s=r(s,c,f,a,t[l+7],22,-45705983),a=r(a,s,c,f,t[l+8],7,1770035416),f=r(f,a,s,c,t[l+9],12,-1958414417),c=r(c,f,a,s,t[l+10],17,-42063),s=r(s,c,f,a,t[l+11],22,-1990404162),a=r(a,s,c,f,t[l+12],7,1804603682),f=r(f,a,s,c,t[l+13],12,-40341101),c=r(c,f,a,s,t[l+14],17,-1502002290),s=r(s,c,f,a,t[l+15],22,1236535329),a=o(a,s,c,f,t[l+1],5,-165796510),f=o(f,a,s,c,t[l+6],9,-1069501632),c=o(c,f,a,s,t[l+11],14,643717713),s=o(s,c,f,a,t[l+0],20,-373897302),a=o(a,s,c,f,t[l+5],5,-701558691),f=o(f,a,s,c,t[l+10],9,38016083),c=o(c,f,a,s,t[l+15],14,-660478335),s=o(s,c,f,a,t[l+4],20,-405537848),a=o(a,s,c,f,t[l+9],5,568446438),f=o(f,a,s,c,t[l+14],9,-1019803690),c=o(c,f,a,s,t[l+3],14,-187363961),s=o(s,c,f,a,t[l+8],20,1163531501),a=o(a,s,c,f,t[l+13],5,-1444681467),f=o(f,a,s,c,t[l+2],9,-51403784),c=o(c,f,a,s,t[l+7],14,1735328473),s=o(s,c,f,a,t[l+12],20,-1926607734),a=i(a,s,c,f,t[l+5],4,-378558),f=i(f,a,s,c,t[l+8],11,-2022574463),c=i(c,f,a,s,t[l+11],16,1839030562),s=i(s,c,f,a,t[l+14],23,-35309556),a=i(a,s,c,f,t[l+1],4,-1530992060),f=i(f,a,s,c,t[l+4],11,1272893353),c=i(c,f,a,s,t[l+7],16,-155497632),s=i(s,c,f,a,t[l+10],23,-1094730640),a=i(a,s,c,f,t[l+13],4,681279174),f=i(f,a,s,c,t[l+0],11,-358537222),c=i(c,f,a,s,t[l+3],16,-722521979),s=i(s,c,f,a,t[l+6],23,76029189),a=i(a,s,c,f,t[l+9],4,-640364487),f=i(f,a,s,c,t[l+12],11,-421815835),c=i(c,f,a,s,t[l+15],16,530742520),s=i(s,c,f,a,t[l+2],23,-995338651),a=u(a,s,c,f,t[l+0],6,-198630844),f=u(f,a,s,c,t[l+7],10,1126891415),c=u(c,f,a,s,t[l+14],15,-1416354905),s=u(s,c,f,a,t[l+5],21,-57434055),a=u(a,s,c,f,t[l+12],6,1700485571),f=u(f,a,s,c,t[l+3],10,-1894986606),c=u(c,f,a,s,t[l+10],15,-1051523),s=u(s,c,f,a,t[l+1],21,-2054922799),a=u(a,s,c,f,t[l+8],6,1873313359),f=u(f,a,s,c,t[l+15],10,-30611744),c=u(c,f,a,s,t[l+6],15,-1560198380),s=u(s,c,f,a,t[l+13],21,1309151649),a=u(a,s,c,f,t[l+4],6,-145523070),f=u(f,a,s,c,t[l+11],10,-1120210379),c=u(c,f,a,s,t[l+2],15,718787259),s=u(s,c,f,a,t[l+9],21,-343485551),a=y(a,p),s=y(s,h),c=y(c,d),f=y(f,v)}return[a,s,c,f]}(o(t,{ibits:8,obits:32,obigendian:!1}),8*t.length),{ibits:32,ibigendian:!1})}(d):function(t){return i(function(t,e){function n(t,e,n,r){return t<20?e&n|~e&r:t<40?e^n^r:t<60?e&n|e&r|n&r:e^n^r}function r(t){return t<20?1518500249:t<40?1859775393:t<60?-1894007588:-899497514}t[e>>5]|=128<<24-e%32,t[15+(e+64>>9<<4)]=e;for(var o=Array(80),i=1732584193,u=-271733879,a=-1732584194,s=271733878,c=-1009589776,f=0;f<t.length;f+=16){for(var l=i,p=u,h=a,d=s,v=c,g=0;g<80;g++){o[g]=g<16?t[f+g]:b(o[g-3]^o[g-8]^o[g-14]^o[g-16],1);var m=y(y(b(i,5),n(g,u,a,s)),y(y(c,o[g]),r(g)));c=s,s=a,a=b(u,30),u=i,i=m}i=y(i,l),u=y(u,p),a=y(a,h),s=y(s,d),c=y(c,v)}return[i,u,a,s,c]}(o(t,{ibits:8,obits:32,obigendian:!0}),8*t.length),{ibits:32,ibigendian:!0})}(d);for(e=0;e<16;e++)this[e]=g.charCodeAt(e)}return this[6]&=15,this[6]|=t<<4,this[8]&=63,this[8]|=128,this},B.prototype.format=function(e){var r,o;return"z85"===e?r=function(t,e){if(e%4!=0)throw new Error("z85_encode: invalid input length (multiple of 4 expected)");for(var r="",o=0,i=0;o<e;)if(i=256*i+t[o++],o%4==0){for(var u=52200625;u>=1;){var a=Math.floor(i/u)%85;r+=n[a],u/=85}i=0}return r}(this,16):"b16"===e?(o=Array(32),t(this,0,15,!0,o,0),r=o.join("")):void 0!==e&&"std"!==e||(o=new Array(36),t(this,0,3,!1,o,0),o[8]="-",t(this,4,5,!1,o,9),o[13]="-",t(this,6,7,!1,o,14),o[18]="-",t(this,8,9,!1,o,19),o[23]="-",t(this,10,15,!1,o,24),r=o.join("")),r},B.prototype.toString=function(t){return this.format(t)},B.prototype.parse=function(t,n){if("string"!=typeof t)throw new Error("UUID: parse: invalid argument (type string expected)");if("z85"===n)!function(t,e){var n=t.length;if(n%5!=0)throw new Error("z85_decode: invalid input length (multiple of 5 expected)");void 0===e&&(e=new Array(4*n/5));for(var o=0,i=0,u=0;o<n;){var a=t.charCodeAt(o++)-32;if(a<0||a>=r.length)break;if(u=85*u+r[a],o%5==0){for(var s=16777216;s>=1;)e[i++]=Math.trunc(u/s%256),s/=256;u=0}}}(t,this);else if("b16"===n)e(t,0,35,this,0);else if(void 0===n||"std"===n){var o={nil:"00000000-0000-0000-0000-000000000000","ns:DNS":"6ba7b810-9dad-11d1-80b4-00c04fd430c8","ns:URL":"6ba7b811-9dad-11d1-80b4-00c04fd430c8","ns:OID":"6ba7b812-9dad-11d1-80b4-00c04fd430c8","ns:X500":"6ba7b814-9dad-11d1-80b4-00c04fd430c8"};if(void 0!==o[t])t=o[t];else if(!t.match(/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/))throw new Error('UUID: parse: invalid string representation (expected "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx")');e(t,0,7,this,0),e(t,9,12,this,4),e(t,14,17,this,6),e(t,19,22,this,8),e(t,24,35,this,10)}return this},B.prototype.export=function(){for(var t=Array(16),e=0;e<16;e++)t[e]=this[e];return t},B.prototype.import=function(t){if(!("object"==typeof t&&t instanceof Array))throw new Error("UUID: import: invalid argument (type Array expected)");if(16!==t.length)throw new Error("UUID: import: invalid argument (Array of length 16 expected)");for(var e=0;e<16;e++){if("number"!=typeof t[e])throw new Error("UUID: import: invalid array element #"+e+" (type Number expected)");if(!isFinite(t[e])||Math.floor(t[e])!==t[e])throw new Error("UUID: import: invalid array element #"+e+" (Number with integer value expected)");if(!(t[e]>=0&&t[e]<=255))throw new Error("UUID: import: invalid array element #"+e+" (Number with integer value in range 0...255 expected)");this[e]=t[e]}return this},B.prototype.compare=function(t){if("object"!=typeof t)throw new Error("UUID: compare: invalid argument (type UUID expected)");if(!(t instanceof B))throw new Error("UUID: compare: invalid argument (type UUID expected)");for(var e=0;e<16;e++){if(this[e]<t[e])return-1;if(this[e]>t[e])return 1}return 0},B.prototype.fold=function(t){if(void 0===t)throw new Error("UUID: fold: invalid argument (number of fold operations expected)");if(t<1||t>4)throw new Error("UUID: fold: invalid argument (1-4 fold operations expected)");for(var e=16/Math.pow(2,t),n=new Array(e),r=0;r<e;r++){for(var o=0,i=0;r+i<16;i+=e)o^=this[r+i];n[r]=o}return n},B.PCG=g,B}(),t.exports.default=t.exports});function m(t,e,n){return e&&n?new g(t,e,n):new g(t)}!function(t){t[t.V1=1]="V1",t[t.V3=3]="V3",t[t.V4=4]="V4",t[t.V5=5]="V5"}(y||(y={})),function(t){t.Standard="std",t.Base16="b16",t.ZeroMQBase85="z85"}(b||(b={}));var w=Object.freeze({get Version(){return y},get Format(){return b},namespace:function(t,e,n,r){return void 0===n&&(n=y.V5),void 0===r&&(r=b.Standard),m(n,t,e).format(r)},generate:function(t,e){return void 0===t&&(t=y.V4),void 0===e&&(e=b.Standard),m(t).format(e)}}),E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};function x(t,e){function n(){this.constructor=t}E(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function B(t,e,n,r){return new(n||(n=Promise))(function(o,i){function u(t){try{s(r.next(t))}catch(t){i(t)}}function a(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(u,a)}s((r=r.apply(t,e||[])).next())})}function L(t,e){var n,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(o=r[2&i[0]?"return":i[0]?"throw":"next"])&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[0,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,r=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=(o=u.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=e.call(t,u)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}var U,S=function(){function t(){this.eventListeners={}}return t.prototype.add=function(t,e){this.eventListeners[t]?-1===this.eventListeners[t].indexOf(e)&&this.eventListeners[t].push(e):this.eventListeners[t]=[e]},t.prototype.remove=function(t,e){var n=(this.eventListeners[t]||[]).indexOf(e);n>-1&&(this.eventListeners[t].splice(n,1),0===this.eventListeners[t].length&&delete this.eventListeners[t])},t.prototype.emit=function(t){return B(this,void 0,void 0,function(){var e,n,r,o,i,u;return L(this,function(a){switch(a.label){case 0:if(!(e=this.eventListeners[t.getEventName()]||[]))return[3,2];for(n=[],r=0,o=e;r<o.length;r++){i=o[r];try{u=Promise.resolve(i(t)).catch(function(t){console.error(t)}),n.push(u)}catch(t){console.error(t)}}return[4,Promise.all(n)];case 1:a.sent(),a.label=2;case 2:return[2]}})})},t}();!function(t){t.Self="self",t.Broadcast="broadcast"}(U||(U={}));var k=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return x(e,t),e}(function(){function t(){this.eventListenerManager=new S,this.eventLocks={},this.subscribedEventBroadcasts=[]}return t.prototype.hasEventLock=function(t){return!!this.eventLocks[t.getEventId()]},t.prototype.acquireEventLock=function(t){return this.eventLocks[t.getEventId()]=!0,this},t.prototype.releaseEventLock=function(t){return delete this.eventLocks[t.getEventId()],this},t.prototype.resolveEventBroadcast=function(t){var e=null;"function"==typeof t.getEventBroadcast?e=t.getEventBroadcast():"function"==typeof t&&(e=t);return e},t.prototype.createEventBroadcast=function(){var t=this;return function(e){return t.emit(e)}},t.prototype.getEventBroadcast=function(){return void 0===this.eventBroadcast&&(this.eventBroadcast=this.createEventBroadcast()),this.eventBroadcast},t.prototype.on=function(t,e){return this.addEventListener(t,e)},t.prototype.off=function(t,e){return this.removeEventListener(t,e)},t.prototype.once=function(t,e){for(var n=this,r=Array.isArray(t)?t:[t],o=function(t){i.addEventListener(t,function r(o){return B(n,void 0,void 0,function(){return L(this,function(n){switch(n.label){case 0:return this.removeEventListener(t,r),[4,e(o)];case 1:return n.sent(),[2]}})})})},i=this,u=0,a=r;u<a.length;u++){o(a[u])}return this},t.prototype.addEventListener=function(t,e){for(var n=0,r=Array.isArray(t)?t:[t];n<r.length;n++){var o=r[n];this.eventListenerManager.add(o,e)}return this},t.prototype.removeEventListener=function(t,e){for(var n=0,r=Array.isArray(t)?t:[t];n<r.length;n++){var o=r[n];this.eventListenerManager.remove(o,e)}return this},t.prototype.addEventBroadcast=function(t){var e=this.resolveEventBroadcast(t);return null!==e&&-1===this.subscribedEventBroadcasts.indexOf(e)&&this.subscribedEventBroadcasts.push(e),this},t.prototype.removeEventBroadcast=function(t){var e=this.resolveEventBroadcast(t);if(null!==e){var n=this.subscribedEventBroadcasts.indexOf(e);n>-1&&this.subscribedEventBroadcasts.slice(n,1)}return this},t.prototype.emit=function(t){return B(this,void 0,void 0,function(){var e,n;return L(this,function(r){switch(r.label){case 0:if(this.hasEventLock(t))return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),this.acquireEventLock(t),e=[this.eventListenerManager.emit(t)],t.getEventScope()===U.Broadcast&&this.subscribedEventBroadcasts.forEach(function(n){try{var r=Promise.resolve(n(t)).catch(function(t){console.error(t)});e.push(r)}catch(t){console.error(t)}}),[4,Promise.all(e)];case 2:return r.sent(),this.releaseEventLock(t),[3,4];case 3:throw n=r.sent(),this.releaseEventLock(t),n;case 4:return[2]}})})},t}()),A=(function(t){function e(e,n,r,o){void 0===o&&(o=U.Broadcast);var i=t.call(this,e,n,o)||this;return i.eventData=r,i}x(e,t),e.prototype.getEventData=function(){return this.eventData}}(function(){function t(t,e,n){void 0===n&&(n=U.Broadcast),this.eventId=w.generate(),this.eventName=t,this.sender=e,this.eventScope=n}return t.prototype.getEventId=function(){return this.eventId},t.prototype.getEventScope=function(){return this.eventScope},t.prototype.getEventName=function(){return this.eventName},t.prototype.getSender=function(){return this.sender},t.prototype.rename=function(t){var e=Object.create(this);return e.eventName=t,e},t.prototype.prefix=function(t){var e=this.getEventName();return t.length>0&&(e=t+"."+e),this.rename(e)},t.prototype.suffix=function(t){var e=this.getEventName();return t.length>0&&(e=e+"."+t),this.rename(e)},t.prototype.toString=function(){return this.getEventName()},t}()),new k);function j(t){return e(this,void 0,void 0,function(){return n(this,function(e){switch(e.label){case 0:return[4,A.emit(t)];case 1:return e.sent(),[2]}})})}function O(t,e){return A.on(t,e)}function M(t,e){return A.off(t,e)}function C(t,e){return A.once(t,e)}function I(t,e){return A.addEventListener(t,e)}function D(t,e){return A.removeEventListener(t,e)}function P(t){return A.addEventBroadcast(t)}function _(t){return A.removeEventBroadcast(t)}function N(){return A.getEventBroadcast()}var R=Object.freeze({emit:j,on:O,off:M,once:C,addEventListener:I,removeEventListener:D,addEventBroadcast:P,removeEventBroadcast:_,getEventBroadcast:N});function z(t){return(z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var T=[];function V(t){t.addEventBroadcast(R),P(t),T.forEach(function(e){t.capture(e.callback,e.filter)})}function W(){return h.isBrowser()?v.get(window,"vl.widget.runtime.instances",[]):[]}h.isBrowser()&&(W().forEach(V),window.addEventListener("vl.widget.runtime",function(t){V(t.detail)}));var F=function(){function t(){}return t.prototype.list=function(t){var e=[];return W().forEach(function(n){e=e.concat(n.getWidgetManager().list(t))}),e},t.prototype.each=function(t){return new Promise(function(e,n){var r=[];W().forEach(function(e){r.push(e.getWidgetManager().each(t))}),Promise.all(r).then(function(t){return[].concat.apply([],t)}).then(e).catch(n)})},t.prototype.has=function(t){return null!==this.get(t)},t.prototype.get=function(t){for(var e=null,n=W(),r=0;r<n.length&&null===e;r+=1)e=n[r].getWidgetManager().get(t);return e},t.prototype.mount=function(t){return e(this,void 0,void 0,function(){var r=this;return n(this,function(o){return[2,this.each(function(o){return e(r,void 0,void 0,function(){return n(this,function(e){switch(e.label){case 0:return t&&!t(o)?[3,2]:[4,o.mount()];case 1:e.sent(),e.label=2;case 2:return[2,o]}})})})]})})},t.prototype.unmount=function(t){return e(this,void 0,void 0,function(){var r=this;return n(this,function(o){return[2,this.each(function(o){return e(r,void 0,void 0,function(){return n(this,function(e){switch(e.label){case 0:return t&&!t(o)?[3,2]:[4,o.unmount()];case 1:e.sent(),e.label=2;case 2:return[2,o]}})})})]})})},t.prototype.remount=function(t){return e(this,void 0,void 0,function(){var r=this;return n(this,function(o){return[2,this.each(function(o){return e(r,void 0,void 0,function(){return n(this,function(e){switch(e.label){case 0:return t&&!t(o)?[3,2]:[4,o.remount()];case 1:e.sent(),e.label=2;case 2:return[2,o]}})})})]})})},t}(),G=new F;function q(t){return e(this,void 0,void 0,function(){var r=this;return n(this,function(o){switch(o.label){case 0:if(!H(t))throw new p.RuntimeError("Widget definition is invalid");return window.vl&&window.vl.widget&&window.vl.widget.platform?[4,window.vl.widget.platform.bootstrap(t.pluginRuntime.configUrl,t.pluginContext)]:[3,2];case 1:return[2,o.sent()];case 2:return[2,new Promise(function(o,u){window.addEventListener("vl.widget.platform",function(i){return e(r,void 0,void 0,function(){var e,r;return n(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,i.detail.bootstrap(t.pluginRuntime.configUrl,t.pluginContext)];case 1:return e=n.sent(),o(e),[3,3];case 2:return r=n.sent(),u(r),[3,3];case 3:return[2]}})})}),i.DOM.loadScript(t.pluginRuntime.platformUrl,document).catch(u)})]}})})}function X(t){return e(this,void 0,void 0,function(){return n(this,function(e){switch(e.label){case 0:return[4,(n=t,new Promise(function(t,e){try{var r=new XMLHttpRequest;r.open("GET",n),r.onreadystatechange=function(){try{if(4===r.readyState)switch(r.status){case 200:var o=JSON.parse(r.responseText);if(!H(o))throw new p.RuntimeError('Response from "'+n+'" does not contain a valid widget definition');t(o);break;default:e(new p.RuntimeError('Request to "'+n+'" was not successful'))}}catch(t){e(t)}},r.onerror=function(t){e(t)},r.onabort=function(){e(new p.RuntimeError('Request to "'+n+'" was aborted'))},r.send()}catch(t){e(t)}}))];case 1:return[4,q(e.sent())];case 2:return[2,e.sent()]}var n})})}function H(t){return null!==t&&"object"===z(t)&&null!==t.pluginRuntime&&"object"===z(t.pluginRuntime)&&"string"==typeof t.pluginRuntime.configUrl&&"string"==typeof t.pluginRuntime.platformUrl&&null!==t.pluginContext&&"object"===z(t.pluginContext)&&"string"==typeof t.pluginContext.pluginTypeId&&(void 0===t.pluginContext.pluginModule||null===t.pluginContext.pluginModule||"string"==typeof t.pluginContext.pluginModule||"object"===z(t.pluginContext.pluginModule))}t.DefaultWidgetManagerFacade=F,t.addEventBroadcast=P,t.addEventListener=I,t.bootstrap=function(t){return e(this,void 0,void 0,function(){return n(this,function(e){switch(e.label){case 0:if(!h.isBrowser())throw new p.RuntimeError("Bootstrapping a widget can only be performed in a browser");return"string"!=typeof t?[3,2]:[4,X(t)];case 1:return[2,e.sent()];case 2:return[4,q(t)];case 3:return[2,e.sent()]}})})},t.capture=function(t,e){T.push({callback:t,filter:e}),W().forEach(function(n){n.capture(t,e)})},t.emit=j,t.getEventBroadcast=N,t.getVersion=function(){return"1.4.0"},t.getWidgetManager=function(){return G},t.off=M,t.on=O,t.once=C,t.removeEventBroadcast=_,t.removeEventListener=D,Object.defineProperty(t,"__esModule",{value:!0})});
